<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Los XV de Mía — Pasaporte</title>
  <meta name="theme-color" content="#0B1D3A" />
  <meta name="description" content="Invitación de XV estilo pasaporte + boarding pass, elegante y personal.">
  <meta property="og:title" content="Invitación XV — Pasaporte" />
  <meta property="og:description" content="Invitación de XV estilo pasaporte + boarding pass, elegante y personal." />
  <meta property="og:image" content="https://images.unsplash.com/photo-1520975922203-b7f5af5c0d5f?q=80&w=1600&auto=format&fit=crop" />

  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            navy: '#0B1D3A',
            gold: '#C9A86A',
            ivory: '#F7F4EC',
            ink: '#0B1D3A',
            paper: '#F7F4EC',
          },
          boxShadow: {
            glam: '0 10px 30px rgba(0,0,0,.15)'
          },
          fontFamily: {
            display: ['Playfair Display', 'serif'],
            sans: ['Poppins', 'system-ui', 'sans-serif']
          },
          backgroundImage: {
            passportTex: 'radial-gradient(1200px 600px at 120% -10%, rgba(255,255,255,.08), transparent), radial-gradient(1000px 500px at -10% 120%, rgba(255,255,255,.06), transparent)'
          }
        }
      }
    }
  </script>

  <style>
    /* --- Base Resets --- */
    html { box-sizing: border-box; }
    *, *::before, *::after { box-sizing: inherit; }
    img, svg, video, canvas { max-width: 100%; height: auto; display: block; }

    /* --- Custom Properties (para clases CSS personalizadas) --- */
    :root {
      --brand-navy: #0B1D3A;
      --brand-gold: #C9A86A;
      --brand-ivory: #F7F4EC;
    }

    /* --- Utilidades CSS --- */
    .title-gold {
      background: linear-gradient(92deg, var(--brand-gold), #e7d0a1);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    .elegant-border {
      border: 1px solid rgba(201, 168, 106, .4);
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, .08);
    }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

    /* --- Componentes --- */
    .btn {
      display: inline-flex; align-items: center; justify-content: center;
      gap: .5rem; padding: .5rem 1rem; border-radius: .75rem;
      border-width: 1px; transition: .2s; font-weight: 500;
    }
    .btn-gold {
      border-color: var(--brand-gold); color: var(--brand-navy);
      background-color: var(--brand-gold);
    }
    .btn-gold:hover { background-color: #c09b55; }
    .btn-ghost {
      border-color: rgba(255, 255, 255, .1); color: var(--brand-ivory);
    }
    .btn-ghost:hover { background-color: rgba(255, 255, 255, .06); }
    .chip {
      display: inline-flex; align-items: center; padding: .25rem .75rem;
      border-radius: 9999px; border: 1px solid rgba(201, 168, 106, .6);
      color: var(--brand-gold); font-size: .75rem;
    }

    /* --- Layout: Hero --- */
    .hero-bg {
      position: relative;
      isolation: isolate;
      background-size: cover;
      background-repeat: no-repeat;
      background-position: var(--hero-pos, center);
      /* Desvanecido inferior elegante que no tapa el contenido */
      -webkit-mask-image: linear-gradient(to bottom, black 80%, transparent 100%);
      mask-image: linear-gradient(to bottom, black 80%, transparent 100%);
    }
    /* Viñeta y baño de color sobre la imagen */
    .hero-bg::before {
      content: "";
      position: absolute;
      inset: 0;
      z-index: -1; /* Se posiciona detrás del contenido */
      background:
        radial-gradient(80% 60% at 50% 15%, rgba(255,255,255,.06), transparent 60%),
        linear-gradient(to bottom, rgba(11,29,58,.55), rgba(11,29,58,.85));
    }

    /* --- Layout: Páginas deslizables --- */
    .page {
      scroll-snap-align: start;
      position: relative;
      overflow: hidden;
    }
    .snap-container {
      scroll-snap-type: x mandatory;
    }
    /* Orden visual de las páginas con Flexbox */
    #viewport > #p-count { order: 1 }
    #viewport > #p-portada { order: 2 }
    #viewport > #p-datos { order: 3 }
    #viewport > #p-mapa { order: 4 }
    #viewport > #p-dress { order: 5 }
    #viewport > #p-rsvp { order: 6 }
    #viewport > #p-regalos { order: 7 }
    #viewport > #p-galeria { order: 8 }
    #viewport > #p-agenda { order: 9 }
    #viewport > #p-faq { order: 10 }

    /* Fade en el borde derecho para PC */
    .edge-fade {
        display: none;
    }
    @media (min-width: 1024px) {
        .edge-fade {
            display: block; position: absolute; inset-inline-end: 0;
            top: 0; bottom: 0; width: 56px; pointer-events: none;
            background: linear-gradient(to left, rgba(11, 29, 58, .25), transparent);
        }
    }

    /* --- Componente: Cuenta Regresiva --- */
    #p-count .count-wrap {
      display: flex; flex-wrap: wrap; justify-content: center;
      align-items: center; gap: .75rem; min-height: 180px;
    }
    #p-count .count-box {
      width: 78px; height: 100px; border-radius: .9rem;
      background: var(--brand-navy); color: var(--brand-ivory);
      display: flex; flex-direction: column; align-items: center;
      justify-content: center; box-shadow: 0 6px 18px rgba(0,0,0,.18);
    }
    #p-count .num { font-family: "Playfair Display", serif; font-size: 1.875rem; line-height: 1; }
    #p-count .unit { font-size: .70rem; opacity: .9; }

    /* --- Animaciones y UX --- */
    .swipe-hint {
      position: sticky; bottom: .75rem; left: 0;
      width: fit-content; margin-left: auto; margin-right: .5rem;
      z-index: 20; background: rgba(247, 244, 236, .9);
      color: var(--brand-navy); border: 1px solid rgba(201, 168, 106, .6);
      border-radius: 9999px; padding: .35rem .7rem .35rem .6rem;
      display: inline-flex; align-items: center; gap: .4rem;
      backdrop-filter: blur(6px); box-shadow: 0 8px 20px rgba(0,0,0,.18);
      animation: bump 2.2s infinite;
    }
    .chev { animation: slide 1.4s infinite; }
    @keyframes floaty {
      50% { transform: translateY(-6px) rotate(-1deg); }
    }
    @keyframes bump {
      50% { transform: translateX(-4px) }
    }
    @keyframes slide {
      60% { opacity: 1; transform: translateX(6px) }
      0%, 100% { opacity: .4; transform: translateX(0) }
    }
  </style>
</head>

<body class="bg-navy text-ivory font-sans">
<header class="sticky top-0 z-40 backdrop-blur bg-navy/80 border-b border-white/10">
  <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
    <div class="text-sm font-semibold text-ivory/70">OneClick Invitaciones</div>
    
    <div class="font-display text-lg tracking-wide">Mis <span class="title-gold">XV</span></div>
  </div>
</header>

  <section id="hero" class="relative hero-bg" style="--hero-pos: 50% 28%;">
    <div class="absolute inset-0 bg-passportTex pointer-events-none"></div>
    <div class="relative max-w-5xl mx-auto px-4 py-16 sm:py-20 grid md:grid-cols-2 gap-8 items-start md:items-center min-h-[56vh]">
      <div>
        <h1 class="font-display text-4xl sm:text-5xl leading-tight">
          <span class="block title-gold">Mis XV</span>
          <span id="heroName" class="block"></span>
        </h1>
        <p class="mt-4 text-white/90">PRUEBA invito a mis XV! Deslizá para ver todos los detalles.</p>
        <div class="mt-6 flex flex-wrap gap-3">
          <a href="#pages" class="btn btn-gold">Ver detalles</a>
        </div>
        
        <div class="relative mt-8 max-w-sm">
          <div class="bg-ivory/95 backdrop-blur text-navy rounded-2xl p-5 shadow-glam border border-gold/40">
            <div class="text-xs tracking-widest uppercase text-navy/70">Boarding Pass</div>
            <div class="mt-2 flex items-center justify-between gap-2">
              <div>
                <div class="text-[10px] text-navy/60">From</div>
                <div class="font-display text-2xl">BUE</div>
              </div>
              <svg width="56" height="24" viewBox="0 0 56 24" fill="none" class="opacity-70">
                <path d="M0 12h44" stroke="#0B1D3A" /><path d="M44 12l-4-3v6l4-3z" fill="#0B1D3A" />
              </svg>
              <div class="text-right">
                <div class="text-[10px] text-navy/60">To</div>
                <div class="font-display text-2xl">PTO. MADERO</div>
              </div>
            </div>
            <div class="mt-3 grid grid-cols-3 gap-2 text-sm">
              <div>
                <div class="text-[10px] text-navy/60">Nombre</div>
                <div data-fill="name" class="font-semibold"></div>
              </div>
              <div>
                <div class="text-[10px] text-navy/60">Fecha</div>
                <div data-fill="dateShort" class="font-semibold"></div>
              </div>
              <div>
                <div class="text-[10px] text-navy/60">Salón</div>
                <div data-fill="venue" class="font-semibold truncate"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div>
        </div>
    </div>
  </section>

  <section id="pages" class="relative pt-8">
    <div class="max-w-5xl mx-auto px-4">
      <div id="tabsContainer" class="flex flex-wrap gap-2 justify-center mb-4">
        </div>

      <div class="relative">
        <div id="viewport" class="snap-container no-scrollbar overflow-x-auto flex gap-4 pb-10 lg:flex-wrap lg:justify-center lg:snap-none lg:overflow-x-visible">
          
          <article id="p-count" class="page min-w-[92%] lg:max-w-sm lg:w-full bg-ivory text-navy rounded-2xl p-6 shadow-glam elegant-border">
            <h3 class="font-display text-2xl">Cuenta regresiva</h3>
            <div class="mt-4 count-wrap">
              <div class="count-box"><div id="cDays" class="num">00</div><div class="unit">días</div></div>
              <div class="count-box"><div id="cHours" class="num">00</div><div class="unit">horas</div></div>
              <div class="count-box"><div id="cMins" class="num">00</div><div class="unit">min</div></div>
              <div class="count-box"><div id="cSecs" class="num">00</div><div class="unit">seg</div></div>
            </div>
          </article>

          <article id="p-portada" class="page min-w-[92%] lg:max-w-sm lg:w-full bg-ivory text-navy rounded-2xl p-6 shadow-glam elegant-border">
            <div class="flex items-start justify-between">
              <div>
                <h2 class="font-display text-3xl leading-tight">Pasaporte XV<br><span data-fill="name" class="title-gold"></span></h2>
                <p data-fill="city" class="mt-2 text-navy/70"></p>
              </div>
              <img src="https://images.unsplash.com/photo-1530789253388-582c481c54b0?q=80&w=300&auto=format&fit=crop" alt="Escudo dorado" class="w-14 h-14 sm:w-16 sm:h-16 shrink-0 rounded-full border border-gold/60 object-cover">
            </div>
            <div class="mt-6 grid grid-cols-2 gap-4 text-sm">
              <div>
                <div class="text-navy/60">Fecha</div>
                <div data-fill="dateLong" class="font-semibold"></div>
              </div>
              <div>
                <div class="text-navy/60">Salón</div>
                <div data-fill="venue" class="font-semibold"></div>
              </div>
              <div class="col-span-2">
                <div class="text-navy/60">Dirección</div>
                <div data-fill="address" class="font-semibold"></div>
              </div>
            </div>
          </article>

          <article id="p-datos" class="page min-w-[92%] lg:max-w-sm lg:w-full bg-ivory text-navy rounded-2xl p-6 shadow-glam elegant-border">
            <h3 class="font-display text-2xl">Datos del evento</h3>
            <div class="mt-4 grid sm:grid-cols-2 gap-4">
              <div class="space-y-2"><div class="text-xs text-navy/70">Fecha & Hora</div><div data-fill="dateShort" class="font-semibold"></div></div>
              <div class="space-y-2"><div class="text-xs text-navy/70">Dress code</div><div class="font-semibold">Cocktail elegante</div></div>
              <div class="space-y-2 sm:col-span-2"><div class="text-xs text-navy/70">Salón</div><div data-fill="venueAddress" class="font-semibold"></div></div>
            </div>
          </article>

          <article id="p-mapa" class="page min-w-[92%] lg:max-w-sm lg:w-full bg-ivory text-navy rounded-2xl p-6 shadow-glam elegant-border">
            <h3 class="font-display text-2xl">¿Dónde y cómo llegar?</h3>
            <p class="mt-2 text-navy/70">Usá el botón para abrir Google Maps o mostrar el mapa aquí.</p>
            <div class="mt-4 flex flex-wrap gap-2">
              <a id="mapLink" href="#" target="_blank" class="btn btn-gold">Ver en Google Maps</a>
              <button id="toggleMap" class="btn border-navy text-navy hover:bg-navy/5">Mostrar mapa aquí</button>
            </div>
            <div id="mapWrap" class="hidden mt-4 aspect-[4/3] rounded-xl overflow-hidden border border-navy/20">
              <iframe id="mapFrame" src="" class="w-full h-full" loading="lazy" referrerpolicy="no-referrer-when-downgrade" title="Mapa del salón"></iframe>
            </div>
          </article>

          <article id="p-dress" class="page min-w-[92%] lg:max-w-sm lg:w-full bg-ivory text-navy rounded-2xl p-6 shadow-glam elegant-border">
            <h3 class="font-display text-2xl">Dress code</h3>
            <div class="mt-4 grid grid-cols-2 sm:grid-cols-4 gap-4 text-center">
              <div class="p-4 rounded-xl border border-gold/40 flex flex-col items-center justify-center"><div class="text-4xl">👗</div><div class="mt-2 font-semibold leading-tight break-words text-[0.7rem]">Cocktail</div></div>
              <div class="p-4 rounded-xl border border-gold/40 flex flex-col items-center justify-center"><div class="text-4xl">👔</div><div class="mt-2 font-semibold leading-tight break-words text-[0.7rem]">Formal</div></div>
              <div class="p-4 rounded-xl border border-gold/40 flex flex-col items-center justify-center"><div class="text-4xl">🥂</div><div class="mt-2 font-semibold leading-tight break-words text-[0.7rem]">Elegante</div></div>
              <div class="p-4 rounded-xl border border-gold/40 flex flex-col items-center justify-center"><div class="text-4xl">🚫</div><div class="mt-2 font-semibold leading-tight break-words text-[0.7rem]">Sin deportivas</div></div>
            </div>
          </article>

          <article id="p-rsvp" class="page min-w-[92%] lg:max-w-sm lg:w-full bg-ivory text-navy rounded-2xl p-6 shadow-glam elegant-border">
            <h3 class="font-display text-2xl">Confirmación (RSVP)</h3>
            <form id="rsvpForm" class="mt-4 grid sm:grid-cols-3 gap-3">
              <input name="nombre" required placeholder="Tu nombre" class="block w-full px-4 py-3 rounded-lg border border-navy/20 bg-white/90">
              <select name="asistentes" class="block w-full px-4 py-3 rounded-lg border border-navy/20 bg-white/90">
                <option>1</option><option>2</option><option>3</option><option>4</option>
              </select>
              <button class="btn btn-gold block w-full" type="submit">Confirmar por WhatsApp</button>
              <textarea name="mensaje" placeholder="Mensaje (opcional)" class="block w-full sm:col-span-3 px-4 py-3 rounded-lg border border-navy/20 bg-white/90"></textarea>
            </form>
          </article>

          <article id="p-regalos" class="page min-w-[92%] lg:max-w-sm lg:w-full bg-ivory text-navy rounded-2xl p-6 shadow-glam elegant-border">
            <h3 class="font-display text-2xl">Regalos</h3>
            <p class="mt-2 text-navy/70">Datos para obsequios o transferencia.</p>
            <div class="mt-4 grid sm:grid-cols-2 gap-3 justify-center">
              <div class="p-4 rounded-xl bg-white/80 border border-gold/30"><div class="text-xs text-navy/60">Alias</div><div class="font-semibold">Quince.Pesos</div><div class="mt-2 text-xs text-navy/60">CBU</div><div class="font-mono text-sm">0000000000000000000000</div></div>
              <div class="p-4 rounded-xl bg-white/80 border border-gold/30"><div class="text-xs text-navy/60">Alias</div><div class="font-semibold">Quince.USD</div><div class="mt-2 text-xs text-navy/60">CBU</div><div class="font-mono text-sm">0000000000000000000000</div></div>
            </div>
          </article>

          <article id="p-galeria" class="page min-w-[92%] lg:max-w-sm lg:w-full bg-ivory text-navy rounded-2xl p-6 shadow-glam elegant-border">
            <h3 class="font-display text-2xl">Galería</h3>
            <div class="mt-4 grid grid-cols-2 sm:grid-cols-3 gap-3">
              <img class="rounded-xl border border-gold/30 aspect-square w-full h-full object-cover" src="img/photoshoot_1.jpg" alt="Foto de la galería 1" loading="lazy" />
              <img class="rounded-xl border border-gold/30 aspect-square w-full h-full object-cover" src="img/photoshoot_2.jpg" alt="Foto de la galería 2" loading="lazy" />
              <img class="rounded-xl border border-gold/30 aspect-square w-full h-full object-cover" src="img/photoshoot_3.jpg" alt="Foto de la galería 3" loading="lazy" />
              <img class="rounded-xl border border-gold/30 aspect-square w-full h-full object-cover" src="img/photoshoot_4.jpg" alt="Foto de la galería 4" loading="lazy" />
              <img class="rounded-xl border border-gold/30 aspect-square w-full h-full object-cover" src="img/photoshoot_5.jpg" alt="Foto de la galería 5" loading="lazy" />
              <img class="rounded-xl border border-gold/30 aspect-square w-full h-full object-cover" src="img/photoshoot_6.jpg" alt="Foto de la galería 6" loading="lazy" />
            </div>
          </article>

          <article id="p-agenda" class="page min-w-[92%] lg:max-w-sm lg:w-full bg-ivory text-navy rounded-2xl p-6 shadow-glam elegant-border">
            <h3 class="font-display text-2xl">Agregar al calendario</h3>
            <p class="mt-2 text-navy/70">Podés añadirlo directo a Google Calendar o copiar los detalles para pegar en tu calendario (Apple / Outlook).</p>
            <div class="mt-4 flex flex-col sm:flex-row gap-2">
              <a id="btnGCal" class="btn btn-gold" target="_blank" rel="noopener">Agregar a Google Calendar</a>
              <button id="btnCopyCal" class="btn border border-gold/60 text-navy hover:bg-navy/5">Copiar detalles</button>
            </div>
            <p id="copyToast" class="mt-2 text-sm text-green-700 hidden">¡Detalles copiados!</p>
          </article>

          <article id="p-faq" class="page min-w-[92%] lg:max-w-sm lg:w-full bg-ivory text-navy rounded-2xl p-6 shadow-glam elegant-border">
            <h3 class="font-display text-2xl">Preguntas frecuentes</h3>
            <div class="mt-4 space-y-3">
              <details class="p-4 rounded-xl border border-gold/30 bg-white/70" open><summary class="font-semibold">¿Hay estacionamiento?</summary><p class="mt-2 text-sm text-navy/80">Sí, en la zona del salón hay estacionamiento vigilado.</p></details>
              <details class="p-4 rounded-xl border border-gold/30 bg-white/70"><summary class="font-semibold">¿Niños/as?</summary><p class="mt-2 text-sm text-navy/80">Bienvenidos con supervisión de un adulto.</p></details>
              <details class="p-4 rounded-xl border border-gold/30 bg-white/70"><summary class="font-semibold">¿Código de vestimenta?</summary><p class="mt-2 text-sm text-navy/80">Cocktail elegante.</p></details>
            </div>
          </article>
        </div>

        <div class="lg:hidden swipe-hint select-none"><span>Deslizá</span><span class="chev">➜</span></div>
      </div>
    </div>
  </section>

  <footer class="border-t border-white/10">
    <div class="max-w-5xl mx-auto px-4 py-8 text-sm text-white/60">© <span id="year"></span> OneClick Invitaciones</div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {

      // ====== 1. CONFIGURACIÓN CENTRALIZADA ======
      const CONFIG = {
        name: 'Mía',
        city: 'Buenos Aires, Argentina',
        venue: "Salón Jano's",
        address: 'Olga Cossettini 1031, CABA',
        dateISO: '2025-11-22T21:00:00',
        heroImage: 'https://gregdotel.com/wp-content/uploads/2023/05/15-Carismell_GDP3220_15-anos-jardin-botanico-quinceaneras-republica-dominicana-santo-domingo_Greg-Dotel_1.jpg',
maps: {
  link: 'https://maps.app.goo.gl/vTTtQa75R1XzVvCK7',
  embed: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3283.7766922677633!2d-58.366351887815185!3d-34.60980785770848!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x95a335a780bb0a43%3A0xa51dfe261863a064!2sJano&#39;s%20Puerto%20Madero!5e0!3m2!1ses-419!2sar!4v1759960015208!5m2!1ses-419!2sar" // <-- Esta es la URL que se usará.
},
        whatsapp: '+5491112345678',
        pages: [
          { id: '#p-count', label: 'Cuenta regresiva' },
          { id: '#p-portada', label: 'Portada' },
          { id: '#p-datos', label: 'Datos' },
          { id: '#p-mapa', label: 'Mapa' },
          { id: '#p-dress', label: 'Dress code' },
          { id: '#p-rsvp', label: 'RSVP' },
          { id: '#p-regalos', label: 'Regalos' },
          { id: '#p-galeria', label: 'Galería' },
          { id: '#p-agenda', label: 'Agenda' },
          { id: '#p-faq', label: 'FAQ' }
        ]
      };

      // ====== 2. HELPERS Y SELECTORES ======
      const $ = s => document.querySelector(s);
      const $$ = s => document.querySelectorAll(s);

      // ====== 3. LÓGICA PRINCIPAL ======

      /**
       * Rellena el contenido dinámico del HTML basado en la configuración.
       */
      function populateContent() {
        const eventDate = new Date(CONFIG.dateISO);
        const formatOpts = { hour: '2-digit', minute: '2-digit' };
        const timeStr = eventDate.toLocaleTimeString('es-AR', formatOpts);
        
        const data = {
            name: `de ${CONFIG.name}`,
            venue: CONFIG.venue,
            city: CONFIG.city,
            address: CONFIG.address,
            dateShort: `${eventDate.toLocaleDateString('es-AR', { day: '2-digit', month: '2-digit' })} — ${timeStr}`,
            dateLong: `Sábado ${eventDate.toLocaleDateString('es-AR', { day: 'numeric', month: 'long' })} — ${timeStr}`,
            venueAddress: `${CONFIG.venue} — ${CONFIG.address}`
        };

        // Rellenar elementos con data-fill
        document.querySelectorAll('[data-fill]').forEach(el => {
          const key = el.dataset.fill;
          if (data[key]) el.textContent = data[key.replace('de ', '')];
        });
        
        // Contenido específico
        $('#heroName').textContent = data.name;
        $('#hero').style.backgroundImage = `url('${CONFIG.heroImage}')`;
        $('#year').textContent = new Date().getFullYear();
        $('#mapLink').href = CONFIG.maps.link;

        // Generar tabs dinámicamente
        const tabsContainer = $('#tabsContainer');
        tabsContainer.innerHTML = CONFIG.pages.map(page => 
            `<button class="chip pageTab" data-target="${page.id}">${page.label}</button>`
        ).join('');
      }

      /**
       * Inicia y actualiza la cuenta regresiva cada segundo.
       */
      function startCountdown() {
        const targetTime = new Date(CONFIG.dateISO).getTime();
        const countdownEls = {
            d: $('#cDays'), h: $('#cHours'), 
            m: $('#cMins'), s: $('#cSecs')
        };
        
        function tick() {
            const now = Date.now();
            const diff = Math.max(0, targetTime - now) / 1000;
            
            const time = {
                d: Math.floor(diff / 86400),
                h: Math.floor((diff % 86400) / 3600),
                m: Math.floor((diff % 3600) / 60),
                s: Math.floor(diff % 60)
            };

            for (const unit in time) {
                if (countdownEls[unit]) {
                    countdownEls[unit].textContent = String(time[unit]).padStart(2, '0');
                }
            }
        }
        
        tick();
        setInterval(tick, 1000);
      }

      /**
       * Configura todos los event listeners de la página.
       */
      function setupEventListeners() {
        // Tabs para scroll a páginas
        $('#tabsContainer').addEventListener('click', (e) => {
          if (e.target.matches('.pageTab')) {
            const targetId = e.target.dataset.target;
            $(targetId)?.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
          }
        });

        // Toggle del mapa
        $('#toggleMap').addEventListener('click', () => {
          const wrap = $('#mapWrap');
          const frame = $('#mapFrame');
          wrap.classList.toggle('hidden');
          if (!frame.src && !wrap.classList.contains('hidden')) {
            frame.src = CONFIG.maps.embed;
          }
        });

        // Formulario RSVP
        $('#rsvpForm').addEventListener('submit', (e) => {
          e.preventDefault();
          const data = new FormData(e.target);
          const name = (data.get('nombre') || '').toString().trim();
          const qty = data.get('asistentes');
          const msg = (data.get('mensaje') || '').toString().trim();
          
          let text = `Hola, confirmo asistencia al XV de ${CONFIG.name}. Somos ${qty}.`;
          if (name) text += ` Soy ${name}.`;
          if (msg) text += ` Mensaje: ${msg}`;
          
          const url = `https://wa.me/${CONFIG.whatsapp.replace(/[^\d]/g, '')}?text=${encodeURIComponent(text)}`;
          window.open(url, '_blank');
        });
        
        // Lógica del Calendario
        setupCalendarLogic();
      }
      
      /**
       * Configura los botones de "Agregar a Calendario" y "Copiar".
       */
      function setupCalendarLogic() {
        const dtStart = new Date(CONFIG.dateISO);
        const dtEnd = new Date(dtStart.getTime() + 5 * 3600 * 1000); // 5 horas de duración
        
        const toISO = d => d.toISOString().replace(/[-:]|\.\d{3}/g, '');
        const dates = `${toISO(dtStart)}/${toISO(dtEnd)}`;
        
        const text = `XV de ${CONFIG.name}`;
        const details = `Fiesta de 15 de ${CONFIG.name}. Más info en la invitación online.`;
        const location = `${CONFIG.venue} - ${CONFIG.address}`;
        
        // Link Google Calendar
        const gCalUrl = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(text)}&dates=${dates}&details=${encodeURIComponent(details)}&location=${encodeURIComponent(location)}`;
        $('#btnGCal').href = gCalUrl;

        // Botón copiar detalles
        $('#btnCopyCal').addEventListener('click', async () => {
          const textToCopy = [
            `Título: ${text}`,
            `Fecha: ${dtStart.toLocaleString('es-AR', {dateStyle: 'full', timeStyle: 'short'})}`,
            `Lugar: ${location}`,
            `Notas: ${details}`
          ].join('\n');
          
          try {
            await navigator.clipboard.writeText(textToCopy);
            const toast = $('#copyToast');
            toast.classList.remove('hidden');
            setTimeout(() => toast.classList.add('hidden'), 2000);
          } catch (err) {
            alert('No se pudo copiar. Por favor, intentalo manualmente.');
          }
        });
      }


      // ====== 4. INICIALIZACIÓN ======
      populateContent();
      startCountdown();
      setupEventListeners();

    });
  </script>
</body>
</html>